<?xml version="1.0" encoding="UTF-8"?>
<ActiveObjectClass>
	<Id>1761586380070</Id>
	<Name><![CDATA[Cell]]></Name>
	<Generic>false</Generic>
	<GenericParameter>
		<Id>1761586380075</Id>
		<Name><![CDATA[1761586380075]]></Name>
		<GenericParameterValue Class="CodeValue">
			<Code><![CDATA[T extends Agent]]></Code>
		</GenericParameterValue>
		<GenericParameterLabel>Generic parameter:</GenericParameterLabel>
	</GenericParameter>
	<FlowChartsUsage>ENTITY</FlowChartsUsage>
	<SamplesToKeep>100</SamplesToKeep>
	<LimitNumberOfArrayElements>false</LimitNumberOfArrayElements>
	<ElementsLimitValue>100</ElementsLimitValue>
	<MakeDefaultViewArea>true</MakeDefaultViewArea>
	<SceneGridColor/>
	<SceneBackgroundColor>-4144960</SceneBackgroundColor>
	<SceneSkybox>null</SceneSkybox>
	<AgentProperties>
		<EnvironmentDefinesInitialLocation>true</EnvironmentDefinesInitialLocation>
		<RotateAnimationTowardsMovement>true</RotateAnimationTowardsMovement>
		<RotateAnimationVertically>false</RotateAnimationVertically>
		<VelocityCode Class="CodeUnitValue">
			<Code><![CDATA[10]]></Code>
			<Unit Class="SpeedUnits">MPS</Unit>
		</VelocityCode>
		<PhysicalLength Class="CodeUnitValue">
			<Code><![CDATA[1]]></Code>
			<Unit Class="LengthUnits">METER</Unit>
		</PhysicalLength>
		<PhysicalWidth Class="CodeUnitValue">
			<Code><![CDATA[1]]></Code>
			<Unit Class="LengthUnits">METER</Unit>
		</PhysicalWidth>
		<PhysicalHeight Class="CodeUnitValue">
			<Code><![CDATA[1]]></Code>
			<Unit Class="LengthUnits">METER</Unit>
		</PhysicalHeight>
	</AgentProperties>
	<EnvironmentProperties>
		<EnableSteps>false</EnableSteps>
		<StepDurationCode Class="CodeUnitValue">
			<Code><![CDATA[1.0]]></Code>
			<Unit Class="TimeUnits">SECOND</Unit>
		</StepDurationCode>
		<SpaceType>CONTINUOUS</SpaceType>
		<WidthCode>500</WidthCode>
		<HeightCode>500</HeightCode>
		<ZHeightCode>0</ZHeightCode>
		<ColumnsCountCode>100</ColumnsCountCode>
		<RowsCountCode>100</RowsCountCode>
		<NeigborhoodType>MOORE</NeigborhoodType>
		<LayoutType>USER_DEF</LayoutType>
		<NetworkType>USER_DEF</NetworkType>
		<ConnectionsPerAgentCode>2</ConnectionsPerAgentCode>
		<ConnectionsRangeCode>50</ConnectionsRangeCode>
		<NeighborLinkFractionCode>0.95</NeighborLinkFractionCode>
		<MCode>10</MCode>
	</EnvironmentProperties>
	<DatasetsCreationProperties>
		<AutoCreate>true</AutoCreate>
		<Id>1761586380069</Id>
		<OccurrenceAtTime>true</OccurrenceAtTime>
		<OccurrenceDate>1761638400000</OccurrenceDate>
		<OccurrenceTime Class="CodeUnitValue">
			<Code><![CDATA[0]]></Code>
			<Unit Class="TimeUnits">DAY</Unit>
		</OccurrenceTime>
		<RecurrenceCode Class="CodeUnitValue">
			<Code><![CDATA[1]]></Code>
			<Unit Class="TimeUnits">DAY</Unit>
		</RecurrenceCode>
	</DatasetsCreationProperties>
	<ScaleRuler>
		<Id>1761586380073</Id>
		<Name><![CDATA[scale]]></Name>
		<X>0</X>
		<Y>-150</Y>
		<PublicFlag>false</PublicFlag>
		<PresentationFlag>false</PresentationFlag>
		<ShowLabel>false</ShowLabel>
		<DrawMode>SHAPE_DRAW_2D3D</DrawMode>
		<Length>100</Length>
		<Rotation>0</Rotation>
		<ScaleType>BASED_ON_LENGTH</ScaleType>
		<ModelLength>10</ModelLength>
		<LengthUnits>METER</LengthUnits>
		<Scale>10</Scale>
		<InheritedFromParentAgentType>true</InheritedFromParentAgentType>
	</ScaleRuler>
	<CurrentLevel>1761586380076</CurrentLevel>
	<ConnectionsId>1761586380071</ConnectionsId>
	<Variables xmlns:al="http://anylogic.com"/>
	<StatechartElements>
		<StatechartElement Class="State" ParentState="ROOT_NODE">
			<Id>1761586506374</Id>
			<Name><![CDATA[Unburnt]]></Name>
			<X>130</X>
			<Y>250</Y>
			<Label>
				<X>25</X>
				<Y>10</Y>
			</Label>
			<PublicFlag>false</PublicFlag>
			<PresentationFlag>true</PresentationFlag>
			<ShowLabel>true</ShowLabel>
			<Properties Width="110" Height="80">
				<FillColor>-14513374</FillColor>
			</Properties>
		</StatechartElement>
		<StatechartElement Class="State" ParentState="ROOT_NODE">
			<Id>1761586514385</Id>
			<Name><![CDATA[Burning]]></Name>
			<X>310</X>
			<Y>300</Y>
			<Label>
				<X>10</X>
				<Y>10</Y>
			</Label>
			<PublicFlag>false</PublicFlag>
			<PresentationFlag>true</PresentationFlag>
			<ShowLabel>true</ShowLabel>
			<Properties Width="100" Height="30">
				<EntryAction>get_Main().nBurning++;
numOfIgnitions++;
if(fuelRatio!=0){
	colour = orangeRed;
}
</EntryAction>
				<ExitAction>get_Main().nBurning--;</ExitAction>
				<FillColor>-47872</FillColor>
			</Properties>
		</StatechartElement>
		<StatechartElement Class="State" ParentState="ROOT_NODE">
			<Id>1761586519238</Id>
			<Name><![CDATA[Burnt]]></Name>
			<X>510</X>
			<Y>300</Y>
			<Label>
				<X>10</X>
				<Y>10</Y>
			</Label>
			<PublicFlag>false</PublicFlag>
			<PresentationFlag>true</PresentationFlag>
			<ShowLabel>true</ShowLabel>
			<Properties Width="100" Height="30">
				<EntryAction>get_Main().nBurnt++;
colour = new Color(95, 88, 77);</EntryAction>
				<ExitAction>get_Main().nBurnt--;</ExitAction>
				<FillColor>-10528691</FillColor>
			</Properties>
		</StatechartElement>
		<StatechartElement Class="State" ParentState="ROOT_NODE">
			<Id>1764098178222</Id>
			<Name><![CDATA[Charred]]></Name>
			<X>130</X>
			<Y>380</Y>
			<Label>
				<X>25</X>
				<Y>10</Y>
			</Label>
			<PublicFlag>false</PublicFlag>
			<PresentationFlag>true</PresentationFlag>
			<ShowLabel>true</ShowLabel>
			<Properties Width="110" Height="80">
				<EntryAction>colour = darkGoldenRod;</EntryAction>
				<FillColor>-4684277</FillColor>
			</Properties>
		</StatechartElement>
		<StatechartElement Class="Transition" ParentState="ROOT_NODE">
			<Id>1761586573011</Id>
			<Name><![CDATA[Fully_Burnt]]></Name>
			<X>410</X>
			<Y>320</Y>
			<Label>
				<X>10</X>
				<Y>-15</Y>
			</Label>
			<PublicFlag>false</PublicFlag>
			<PresentationFlag>true</PresentationFlag>
			<ShowLabel>true</ShowLabel>
			<Points>
				<Point>
					<X>0</X>
					<Y>0</Y>
				</Point>
				<Point>
					<X>100</X>
					<Y>0</Y>
				</Point>
			</Points>
			<IconOffset>30.0</IconOffset>
			<Properties Source="1761586514385" Target="1761586519238" Trigger="condition">
				<Timeout Class="CodeUnitValue">
					<Code><![CDATA[get_Main().burningPeriod]]></Code>
					<Unit Class="TimeUnits">DAY</Unit>
				</Timeout>
				<Condition>pointsWithFuel == 0</Condition>
				<Rate Class="CodeUnitValue">
					<Code><![CDATA[1]]></Code>
					<Unit Class="RateUnits">PER_DAY</Unit>
				</Rate>
				<MessageType>Object</MessageType>
				<DefaultTransition>true</DefaultTransition>
				<FilterType>unconditionally</FilterType>
				<EqualsExpression>"text"</EqualsExpression>
				<SatisfiesExpression>true</SatisfiesExpression>
			</Properties>
		</StatechartElement>
		<StatechartElement Class="EntryPoint" ParentState="ROOT_NODE">
			<Id>1761804757554</Id>
			<Name><![CDATA[entrypoint]]></Name>
			<X>40</X>
			<Y>260</Y>
			<Label>
				<X>10</X>
				<Y>5</Y>
			</Label>
			<PublicFlag>false</PublicFlag>
			<PresentationFlag>true</PresentationFlag>
			<ShowLabel>true</ShowLabel>
			<Points>
				<Point>
					<X>0</X>
					<Y>0</Y>
				</Point>
				<Point>
					<X>90</X>
					<Y>0</Y>
				</Point>
			</Points>
			<Properties Target="1761586506374">
				<Action>Neighbors[0] = (Cell) this.getAgentNextToMe(NORTHWEST);
Neighbors[1] = (Cell) this.getAgentNextToMe(NORTH);
Neighbors[2] = (Cell) this.getAgentNextToMe(NORTHEAST);
Neighbors[3] = (Cell) this.getAgentNextToMe(EAST);
Neighbors[4] = (Cell) this.getAgentNextToMe(SOUTHEAST);
Neighbors[5] = (Cell) this.getAgentNextToMe(SOUTH);
Neighbors[6] = (Cell) this.getAgentNextToMe(SOUTHWEST);
Neighbors[7] = (Cell) this.getAgentNextToMe(WEST);

get_Main().nUnburnt++;
SetUpData();</Action>
			</Properties>
		</StatechartElement>
		<StatechartElement Class="Transition" ParentState="ROOT_NODE">
			<Id>1763676019769</Id>
			<Name><![CDATA[ignite]]></Name>
			<X>240</X>
			<Y>310</Y>
			<Label>
				<X>15</X>
				<Y>-15</Y>
			</Label>
			<PublicFlag>false</PublicFlag>
			<PresentationFlag>true</PresentationFlag>
			<ShowLabel>true</ShowLabel>
			<Points>
				<Point>
					<X>0</X>
					<Y>0</Y>
				</Point>
				<Point>
					<X>40</X>
					<Y>0</Y>
				</Point>
				<Point>
					<X>70</X>
					<Y>0</Y>
				</Point>
			</Points>
			<IconOffset>30.0</IconOffset>
			<Properties Source="1761586506374" Target="1761586514385" Trigger="message">
				<Action>isCellBurning = true;
get_Main().nUnburnt--;</Action>
				<Timeout Class="CodeUnitValue">
					<Code><![CDATA[1]]></Code>
					<Unit Class="TimeUnits">DAY</Unit>
				</Timeout>
				<Condition>true</Condition>
				<Rate Class="CodeUnitValue">
					<Code><![CDATA[1]]></Code>
					<Unit Class="RateUnits">PER_DAY</Unit>
				</Rate>
				<MessageType>Object</MessageType>
				<DefaultTransition>true</DefaultTransition>
				<FilterType>equalsTo</FilterType>
				<EqualsExpression>"Ignite"</EqualsExpression>
				<SatisfiesExpression>true</SatisfiesExpression>
			</Properties>
		</StatechartElement>
		<StatechartElement Class="Transition"
                     ParentState="Burning"
                     ParentStateId="1761586514385">
			<Id>1763764703755</Id>
			<Name><![CDATA[SelfBurn]]></Name>
			<X>380</X>
			<Y>330</Y>
			<Label>
				<X>10</X>
				<Y>0</Y>
			</Label>
			<PublicFlag>false</PublicFlag>
			<PresentationFlag>true</PresentationFlag>
			<ShowLabel>false</ShowLabel>
			<Points>
				<Point>
					<X>0</X>
					<Y>0</Y>
				</Point>
				<Point>
					<X>0</X>
					<Y>-30</Y>
				</Point>
			</Points>
			<IconOffset>10.0</IconOffset>
			<Properties Source="1761586514385" Target="1761586514385" Trigger="timeout">
				<Action>boolean isBurning = false;

if (fuelRatio != 0.0) {
	burnRadius += fireSpreadRate * 10;
} else {burnRadius = 0;}

// this compares every set point on the square and 
// compares them to the fire circle representation, 
// and if they are int the fire circle use fuel and 
// set neighbor cells on fire.
pointsWithFuel = 8;
for (int i = 0; i &lt; 8; i++) {
	if (remainingFuel[i] &lt; get_Main().minFuel) {
		pointsWithFuel -= 1;
		continue;
	}
	
	if (!isInRadius(i)) continue;
	
	isBurning = true;

	double fuelConsumption = (1- localMoisture) * remainingFuel[i] * fuelRatio * get_Main().fuelConsumptionRate;
	remainingFuel[i] -= fuelConsumption;
	
	// this ensures the point in a valid cell burns while
	// not telling the invalid neighbor
	if (Neighbors[i] != null &amp;&amp; !Neighbors[i].isCellBurning) {
		igniteNeighbor(i);
	}
}

// moves the circle based on wind direction and speed
// to simulate slowing/quickening spread.
firePointX += get_Main().windSpeed * Math.sin(get_Main().windDirection);
firePointY += get_Main().windSpeed * Math.cos(get_Main().windDirection);

// setting isCellBurning to false while all fuel is
// expent will send it to charred before it can go
// to burnt hence the != 0
if (pointsWithFuel != 0) { 
	isCellBurning = isBurning;
}</Action>
				<Timeout Class="CodeUnitValue">
					<Code><![CDATA[1]]></Code>
					<Unit Class="TimeUnits">HOUR</Unit>
				</Timeout>
				<Condition>true</Condition>
				<Rate Class="CodeUnitValue">
					<Code><![CDATA[1]]></Code>
					<Unit Class="RateUnits">PER_DAY</Unit>
				</Rate>
				<MessageType>Object</MessageType>
				<DefaultTransition>true</DefaultTransition>
				<FilterType>unconditionally</FilterType>
				<EqualsExpression>"text"</EqualsExpression>
				<SatisfiesExpression>true</SatisfiesExpression>
			</Properties>
		</StatechartElement>
		<StatechartElement Class="Transition" ParentState="ROOT_NODE">
			<Id>1763948674710</Id>
			<Name><![CDATA[noLongerBurning]]></Name>
			<X>320</X>
			<Y>330</Y>
			<Label>
				<X>-110</X>
				<Y>35</Y>
			</Label>
			<PublicFlag>false</PublicFlag>
			<PresentationFlag>true</PresentationFlag>
			<ShowLabel>true</ShowLabel>
			<Points>
				<Point>
					<X>0</X>
					<Y>0</Y>
				</Point>
				<Point>
					<X>0</X>
					<Y>80</Y>
				</Point>
				<Point>
					<X>-80</X>
					<Y>80</Y>
				</Point>
			</Points>
			<IconOffset>40.0</IconOffset>
			<Properties Source="1761586514385" Target="1764098178222" Trigger="condition">
				<Action>burnRadius = 0.1;
if(fuelRatio!=0.0){
	colour = peru;
}else{
	colour = blue;
}
get_Main().nCharred++;</Action>
				<Timeout Class="CodeUnitValue">
					<Code><![CDATA[1]]></Code>
					<Unit Class="TimeUnits">DAY</Unit>
				</Timeout>
				<Condition>!isCellBurning</Condition>
				<Rate Class="CodeUnitValue">
					<Code><![CDATA[1]]></Code>
					<Unit Class="RateUnits">PER_DAY</Unit>
				</Rate>
				<MessageType>Object</MessageType>
				<DefaultTransition>true</DefaultTransition>
				<FilterType>equalsTo</FilterType>
				<EqualsExpression>"Ignite"</EqualsExpression>
				<SatisfiesExpression>true</SatisfiesExpression>
			</Properties>
		</StatechartElement>
		<StatechartElement Class="Transition" ParentState="ROOT_NODE">
			<Id>1763953951859</Id>
			<Name><![CDATA[StartFire]]></Name>
			<X>240</X>
			<Y>260</Y>
			<Label>
				<X>40</X>
				<Y>-15</Y>
			</Label>
			<PublicFlag>false</PublicFlag>
			<PresentationFlag>true</PresentationFlag>
			<ShowLabel>true</ShowLabel>
			<Points>
				<Point>
					<X>0</X>
					<Y>0</Y>
				</Point>
				<Point>
					<X>100</X>
					<Y>0</Y>
				</Point>
				<Point>
					<X>100</X>
					<Y>40</Y>
				</Point>
			</Points>
			<IconOffset>60.0</IconOffset>
			<Properties Source="1761586506374" Target="1761586514385" Trigger="message">
				<Action>isCellBurning = true;
burnRadius = 1 + 0.9 * (get_Main().cellWidth / 2);
get_Main().nUnburnt--;</Action>
				<Timeout Class="CodeUnitValue">
					<Code><![CDATA[1]]></Code>
					<Unit Class="TimeUnits">DAY</Unit>
				</Timeout>
				<Condition>true</Condition>
				<Rate Class="CodeUnitValue">
					<Code><![CDATA[1]]></Code>
					<Unit Class="RateUnits">PER_DAY</Unit>
				</Rate>
				<MessageType>Object</MessageType>
				<DefaultTransition>true</DefaultTransition>
				<FilterType>equalsTo</FilterType>
				<EqualsExpression>"init"</EqualsExpression>
				<SatisfiesExpression>true</SatisfiesExpression>
			</Properties>
		</StatechartElement>
		<StatechartElement Class="Transition" ParentState="ROOT_NODE">
			<Id>1764098299832</Id>
			<Name><![CDATA[igniteCharred]]></Name>
			<X>240</X>
			<Y>430</Y>
			<Label>
				<X>20</X>
				<Y>15</Y>
			</Label>
			<PublicFlag>false</PublicFlag>
			<PresentationFlag>true</PresentationFlag>
			<ShowLabel>true</ShowLabel>
			<Points>
				<Point>
					<X>0</X>
					<Y>0</Y>
				</Point>
				<Point>
					<X>110</X>
					<Y>0</Y>
				</Point>
				<Point>
					<X>110</X>
					<Y>-100</Y>
				</Point>
			</Points>
			<IconOffset>60.0</IconOffset>
			<Properties Source="1764098178222" Target="1761586514385" Trigger="message">
				<Action>isCellBurning = true;
get_Main().nCharred--;</Action>
				<Timeout Class="CodeUnitValue">
					<Code><![CDATA[1]]></Code>
					<Unit Class="TimeUnits">DAY</Unit>
				</Timeout>
				<Condition>true</Condition>
				<Rate Class="CodeUnitValue">
					<Code><![CDATA[1]]></Code>
					<Unit Class="RateUnits">PER_DAY</Unit>
				</Rate>
				<MessageType>Object</MessageType>
				<DefaultTransition>true</DefaultTransition>
				<FilterType>equalsTo</FilterType>
				<EqualsExpression>"Ignite"</EqualsExpression>
				<SatisfiesExpression>true</SatisfiesExpression>
			</Properties>
		</StatechartElement>
	</StatechartElements>
	<Functions xmlns:al="http://anylogic.com"/>
	<AgentLinks>
		<AgentLink>
			<Id>1761586380071</Id>
			<Name><![CDATA[connections]]></Name>
			<X>40</X>
			<Y>-50</Y>
			<Label>
				<X>15</X>
				<Y>0</Y>
			</Label>
			<PublicFlag>false</PublicFlag>
			<PresentationFlag>true</PresentationFlag>
			<ShowLabel>true</ShowLabel>
			<OnReceive>if (msg == "Ignite") ignititionSource.add((Cell) sender);</OnReceive>
			<HandleReceiveInConnections>false</HandleReceiveInConnections>
			<AgentLinkType>COLLECTION_OF_LINKS</AgentLinkType>
			<AgentLinkBidirectional>true</AgentLinkBidirectional>
			<MessageType>Object</MessageType>
			<StatechartReference>
				<PackageName>wolfwildfiresimulation</PackageName>
				<ClassName>Cell</ClassName>
				<ItemName>entrypoint</ItemName>
			</StatechartReference>
			<LineStyle>SOLID</LineStyle>
			<LineWidth>1</LineWidth>
			<LineColor>-16777216</LineColor>
			<LineZOrder>UNDER_AGENTS</LineZOrder>
			<LineArrow>NONE</LineArrow>
			<LineArrowPosition>END</LineArrowPosition>
		</AgentLink>
	</AgentLinks>
	<ContainerLinks>
		<ContainerLink>
			<Id>1761801523418</Id>
			<Name><![CDATA[main]]></Name>
			<X>50</X>
			<Y>-20</Y>
			<Label>
				<X>10</X>
				<Y>0</Y>
			</Label>
			<PublicFlag>false</PublicFlag>
			<PresentationFlag>true</PresentationFlag>
			<ShowLabel>true</ShowLabel>
			<ActiveObjectClass>
				<PackageName>wolfwildfiresimulation</PackageName>
				<ClassName>Main</ClassName>
			</ActiveObjectClass>
		</ContainerLink>
	</ContainerLinks>
	<Presentation>
		<Level>
			<Id>1761586380076</Id>
			<Name><![CDATA[level]]></Name>
			<X>0</X>
			<Y>0</Y>
			<Label>
				<X>10</X>
				<Y>0</Y>
			</Label>
			<PublicFlag>true</PublicFlag>
			<PresentationFlag>true</PresentationFlag>
			<ShowLabel>false</ShowLabel>
			<DrawMode>SHAPE_DRAW_2D3D</DrawMode>
			<Z>0</Z>
			<LevelVisibility>DIM_NON_CURRENT</LevelVisibility>
			<Presentation xmlns:al="http://anylogic.com"/>
		</Level>
	</Presentation>
</ActiveObjectClass>
